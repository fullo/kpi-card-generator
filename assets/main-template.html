<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>{{TITOLO_ESERCIZIO}}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        /* === STILI BASE PER VISUALIZZAZIONE BROWSER === */
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #e5e7eb; 
            margin: 0;
            padding: 0;
        }
        
        .page-container { 
            max-width: 1400px; 
            margin: auto; 
            padding: 2rem; 
        }
        
        /* Stili per singola carta */
        .playing-card { 
            font-family: 'Inter', sans-serif; 
            background: #f3f4f6; 
            border: 1px solid #9ca3af; 
            border-radius: 1rem; 
            width: 300px; 
            height: 420px; 
            padding: 0.75rem; 
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); 
            display: flex; 
            flex-direction: column; 
            page-break-inside: avoid; 
            position: relative; 
        }
        
        .playing-card .inner-frame { 
            border: 3px solid #d1d5db; 
            border-radius: 0.75rem; 
            height: 100%; 
            display: flex; 
            flex-direction: column; 
            padding: 0.75rem; 
            background-color: #ffffff; 
        }
        
        .card-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding-bottom: 0.5rem; 
            border-bottom: 2px solid #e5e7eb; 
        }
        
        .card-title { 
            font-family: 'Roboto Slab', serif; 
            font-size: 0.95rem; 
            font-weight: 700; 
            border-radius: 0.25rem; 
            padding: 0 0.25rem; 
        }
        
        .card-icon-container { 
            width: 32px; 
            height: 32px; 
            border-radius: 9999px; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            font-size: 1.5rem; 
        }
        
        .card-image-area { 
            height: 90px; 
            background-color: #e5e7eb; 
            margin-top: 0.75rem; 
            border-radius: 0.5rem; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            font-size: 4rem; 
        }
        
        .card-type-banner { 
            margin-top: 0.75rem; 
            padding: 0.25rem 0.5rem; 
            border-radius: 0.25rem; 
            font-size: 0.75rem; 
            font-weight: 600; 
            text-transform: uppercase; 
            color: white; 
            align-self: flex-start; 
        }
        
        .card-description-box { 
            margin-top: 0.5rem; 
            padding: 0.75rem; 
            background-color: #f9fafb; 
            border: 1px solid #e5e7eb; 
            border-radius: 0.5rem; 
            flex-grow: 1; 
            display: flex; 
            flex-direction: column; 
            justify-content: space-between; 
        }
        
        .card-description-box .main-text { 
            font-size: 0.9rem; 
            line-height: 1.4;
        }
        
        .card-flavor-text { 
            font-size: 0.75rem; 
            font-style: italic; 
            color: #4b5563; 
            margin-top: 0.35rem; 
            padding-top: 0.35rem; 
            border-top: 1px dashed #d1d5db; 
        }
        
        .card-back { 
            display: flex; 
            flex-direction: column; 
            justify-content: space-between; 
            align-items: center; 
            height: 100%; 
            text-align: center; 
        }
        
        .card-back .back-icon { 
            font-size: 8rem; 
            margin-top: 4rem; 
        }
        
        .card-back .back-credit { 
            font-size: 0.6rem; 
            color: #6b7280; 
            align-self: flex-end; 
        }
        
        /* Griglia per browser */
        .card-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); 
            gap: 2rem; 
            justify-items: center; 
        }
        
        /* Titoli e istruzioni */
        .section-title { 
            font-size: 2.25rem; 
            font-weight: 700; 
            margin-bottom: 1rem; 
            padding-bottom: 0.5rem; 
            border-bottom: 2px solid #d1d5db; 
            text-align: center; 
        }
        
        .section-subtitle { 
            font-size: 1.125rem; 
            color: #4b5563; 
            margin-bottom: 2.5rem; 
            text-align: center; 
        }
        
        .print-instructions { 
            background-color: #fefce8; 
            border: 2px dashed #facc15; 
            padding: 1.5rem; 
            margin: 3rem 0; 
            text-align: center; 
            font-weight: 600; 
            color: #ca8a04; 
        }
        
        /* Utility classes */
        .text-center { text-align: center; }
        .mb-12 { margin-bottom: 3rem; }
        .text-4xl { font-size: 2.25rem; }
        .font-bold { font-weight: 700; }
        .text-gray-800 { color: #1f2937; }
        .mt-4 { margin-top: 1rem; }
        .text-lg { font-size: 1.125rem; }
        .text-gray-600 { color: #4b5563; }
        
        /* Stili per tipi di carte */
        .spiegazione .card-image-area { display: none; }
        .spiegazione .main-text { font-size: 0.75rem; line-height: 1.2; }
        .spiegazione .card-type-banner { background-color: black; }
        
        .card-evento-tecnico .card-title, 
        .card-evento-tecnico .card-type-banner { background-color: #3b82f6; color: white; } 
        .card-evento-tecnico .card-icon-container { background-color: #dbeafe; color: #3b82f6; }
        
        .card-evento-marketing .card-title, 
        .card-evento-marketing .card-type-banner { background-color: #ec4899; color: white; } 
        .card-evento-marketing .card-icon-container { background-color: #fce7f3; color: #ec4899; }
        
        .card-evento-sales .card-title, 
        .card-evento-sales .card-type-banner { background-color: #14b8a6; color: white; } 
        .card-evento-sales .card-icon-container { background-color: #ccfbf1; color: #14b8a6; }
        
        .card-evento-aziendale .card-title, 
        .card-evento-aziendale .card-type-banner { background-color: #d97706; color: white; } 
        .card-evento-aziendale .card-icon-container { background-color: #fef3c7; color: #d97706; }
        
        .card-obiettivo .card-title, 
        .card-obiettivo .card-type-banner { background-color: #10b981; color: white; } 
        .card-obiettivo .card-icon-container { background-color: #d1fae5; color: #10b981; }
        
        .card-kpi .card-title, 
        .card-kpi .card-type-banner { background-color: #8b5cf6; color: white; } 
        .card-kpi .card-icon-container { background-color: #ede9fe; color: #8b5cf6; }
        
        .card-vanity .card-title, 
        .card-vanity .card-type-banner { background-color: #6b7280; color: white; } 
        .card-vanity .card-icon-container { background-color: #e5e7eb; color: #6b7280; }
        
        .card-conflitto .card-title, 
        .card-conflitto .card-type-banner { background-color: #ef4444; color: white; } 
        .card-conflitto .card-icon-container { background-color: #fee2e2; color: #ef4444; }
        
        /* === STILI STAMPA === */
        @media print {
            @page {
                size: A4 landscape;
                margin: 0;
            }

            body {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
                background-color: white;
                margin: 0;
                padding: 0;
            }

            /* Nascondi elementi non stampabili */
            .no-print, 
            .section-title, 
            .section-subtitle,
            .print-instructions { 
                display: none !important; 
            }
            
            .page-container { 
                padding: 0;
                margin: 0;
                max-width: none;
            }
            
            /* Container principale per fronti e retri */
            .fronts-container,
            .backs-container {
                width: 297mm;
                height: 210mm;
                margin: 0;
                padding: 0;
                display: flex;
                align-items: center;
                justify-content: center;
                page-break-inside: avoid;
            }
            
            /* IMPORTANTE: Il fronte deve SEMPRE avere page break dopo */
            .fronts-container {
                page-break-after: always !important;
            }
            
            /* Il retro NON deve avere page break dopo (tranne se c'è un altro foglio) */
            .backs-container {
                page-break-after: auto;
            }
            
            /* Ma se c'è un altro foglio dopo, aggiungi page break */
            .backs-container + .fronts-container {
                page-break-before: always !important;
            }

            /* Griglia carte FISSA per stampa */
            .fronts-container .card-grid,
            .backs-container .card-grid {
                display: grid !important;
                grid-template-columns: 65mm 65mm 65mm 65mm !important;
                grid-template-rows: 91mm 91mm !important;
                gap: 5mm !important;
                justify-items: center !important;
                align-items: center !important;
                margin: 0 auto !important;
                padding: 0 !important;
            }

            /* Dimensioni fisse per le carte */
            .playing-card {
                width: 65mm !important;
                height: 91mm !important;
                margin: 0 !important;
                padding: 2mm !important;
                box-sizing: border-box !important;
                border: 0.5mm dashed #d0d0d0 !important;
                box-shadow: none !important;
                page-break-inside: avoid !important;
            }
            
            /* Placeholder invisibili */
            .playing-card.placeholder {
                border: none !important;
                background: transparent !important;
                visibility: hidden !important;
            }

            /* Rotazione carte retro 
            .backs-container .playing-card {
                transform: rotate(180deg);
            }*/

            /* Aggiustamenti dimensioni contenuti */
            .playing-card .inner-frame {
                padding: 2mm !important;
                border-width: 1mm !important;
            }

            .card-header {
                padding-bottom: 1mm !important;
            }

            .card-title {
                font-size: 8pt !important;
                padding: 0.5mm 1mm !important;
            }
            
            .card-icon-container {
                width: 6mm !important;
                height: 6mm !important;
                font-size: 12pt !important;
            }

            .card-image-area {
                height: 15mm !important;
                margin-top: 2mm !important;
                font-size: 24pt !important;
            }

            .card-type-banner {
                margin-top: 2mm !important;
                font-size: 6pt !important;
                padding: 0.5mm 2mm !important;
            }

            .card-description-box {
                margin-top: 2mm !important;
                padding: 2mm !important;
            }

            .card-description-box .main-text {
                font-size: 7pt !important;
                line-height: 1.3 !important;
            }

            .card-flavor-text {
                font-size: 6pt !important;
                margin-top: 1mm !important;
                padding-top: 1mm !important;
            }

            .card-back .back-icon {
                font-size: 36pt !important;
                margin-top: 10mm !important;
            }

            .card-back .back-credit {
                font-size: 5pt !important;
            }
            
            /* Stili specifici per carte spiegazione */
            .spiegazione .card-image-area { 
                display: none !important; 
            }
            .spiegazione .main-text { 
                font-size: 7pt !important; 
                line-height: 1.2 !important; 
            }

            .card-conflitto .card-description-box { 
                padding: 2mm !important; 
            }
            .card-conflitto .card-description-box .main-text { 
                font-size: 7pt !important; 
                line-height: 1.3 !important; 
            }
            .card-conflitto .card-description-box h4 { 
                font-size: 8pt !important; 
                margin-bottom: 1mm !important; 
            }
        }
    </style>
</head>
<body>
    <div class="page-container">
        <div class="text-center mb-12 no-print">
            <h1 class="text-4xl font-bold text-gray-800">{{TITOLO_ESERCIZIO}}</h1>
            <p class="mt-4 text-lg text-gray-600">{{SOTTOTITOLO_ESERCIZIO}}</p>
        </div>
        <div class="fronts-container">
            <h2 class="section-title">Fronte Carte</h2>
            <div class="card-grid">{{FRONTE_CARTE}}</div>
        </div>
        <div class="print-instructions no-print">ATTENZIONE: Stampa fino a questa pagina, poi reinserisci i fogli per stampare il retro.</div>
        <div class="backs-container">
            <h2 class="section-title">Retro Carte</h2>
            <div class="card-grid">{{RETRO_CARTE}}</div>
        </div>
    </div>
</body>
</html>